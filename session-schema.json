{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "version": {
      "type": "array",
      "items": [
        {"type": "string"},
        {"type": "integer"}
      ]
    },
    "windows": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/window"
      }
    },
    "_closedWindows": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/window"
      }
    }
  },
  "required": ["version", "windows"],
  "definitions": {
    "window": {
      "type": "object",
      "properties": {
        "tabs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/tab"
          }
        },
        "selected": {"type": "integer"},
        "_closedTabs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/closedTab"
          }
        }
      },
      "required": ["tabs"]
    },
    "tab": {
      "type": "object",
      "properties": {
        "entries": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/entry"
          }
        },
        "lastAccessed": {"type": "integer"},
        "hidden": {"type": "boolean"},
        "searchMode": {"type": "null"},
        "userContextId": {"type": "integer"},
        "attributes": {"type": "object"},
        "index": {"type": "integer"},
        "requestedIndex": {"type": "integer"},
        "image": {"type": ["null", "string"]},
        "storage": {
          "type": "object",
          "additionalProperties": {
            "type": "object"
          }
        }
      },
      "required": ["entries", "lastAccessed", "hidden", "userContextId", "index"]
    },
    "entry": {
      "type": "object",
      "properties": {
        "url": {"type": "string"},
        "title": {"type": "string"},
        "persist": {"type": "boolean"},
        "principalToInherit_base64": {"type": "string"},
        "hasUserInteraction": {"type": "boolean"},
        "triggeringPrincipal_base64": {"type": "string"},
        "resultPrincipalURI": {
          "type": ["null", "string"]
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/entry"
          }
        }
      },
      "required": ["url", "title", "persist", "hasUserInteraction"]
    },
    "closedTab": {
      "type": "object",
      "properties": {
        "state": {
          "$ref": "#/definitions/tab"
        },
        "title": {"type": "string"},
        "image": {"type": ["null", "string"]},
        "pos": {"type": "integer"},
        "closedAt": {"type": "integer"},
        "sourceWindowId": {"type": "string"},
        "closedId": {"type": "integer"}
      },
      "required": ["state", "title", "pos", "closedAt", "sourceWindowId", "closedId"]
    }
  }
}
